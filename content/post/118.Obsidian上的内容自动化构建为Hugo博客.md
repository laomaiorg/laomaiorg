---
# å¸¸ç”¨å®šä¹‰
title: Obsidianä¸Šçš„å†…å®¹è‡ªåŠ¨åŒ–æ„å»ºä¸ºHugoåšå®¢        # æ ‡é¢˜
slug: obsidian-github-actions-hugo         # æ–‡ç« é“¾æ¥ç¼©ç•¥å
date: 2023-02-12T09:48:58+08:00    # åˆ›å»ºæ—¶é—´
tags: [æŠ˜è…¾, Obsidian, Hugo,]
categories: [æ€è€ƒ]

# ç”¨æˆ·è‡ªå®šä¹‰
# image: 
# ä½ å¯ä»¥é€‰æ‹© å…³é—­(false) æˆ–è€… æ‰“å¼€(true) ä»¥ä¸‹é€‰é¡¹
# photoswipe: true
toc: true       # å…³é—­æ–‡ç« ç›®å½•
# comments: false
# license: false # æ–‡ç« åè®® è¾“å…¥ false å¯ä»¥éšè—
# mathjax: true # åŠ è½½ KaTeX è„šæœ¬
# hidden: true  # éšè—æ–‡ç« ï¼ˆä¸åœ¨é¦–é¡µï¼Œå½’æ¡£ç­‰é¡µé¢æ˜¾ç¤ºï¼Œä½†æ˜¯å¯ä»¥ç›´æ¥é€šè¿‡é“¾æ¥è®¿é—®ï¼‰
# draft: true
---

## è¯´æ˜

ç¯‡å¹…é•¿ä¸”å•°å—¦ï¼Œå†…å®¹åªæ˜¯æˆ‘çš„Hugoåšå®¢æ–‡ç« æ˜¯å¦‚ä½•å®ç°â€œè‡ªåŠ¨åŒ–â€æ„å»ºçš„ä¸€ä»½è®°å½•ã€‚

é¦–å…ˆï¼Œä»¥ä¸‹å†…å®¹ä»…ä¸”åªæ˜¯æˆ‘ä¸ªäººæŒ‰è‡ªå·±çš„éœ€æ±‚ä¸€æ­¥æ­¥å®ç°çš„æ‰€è°“â€œè‡ªåŠ¨åŒ–â€ï¼Œå…¶ä¸­å¾ˆå¤šæ­¥éª¤ç”¨å¤„ä¸å¤§ï¼Œåªæ˜¯æˆ‘ä¸ªäººæœ‰è‡ªå·±çš„å°éœ€æ±‚æ‰ç‰¹æ„åŠ ä¸Šå»ï¼Œæ‰€ä»¥ä»¥ä¸‹å†…å®¹ä»…ä¾›å‚è€ƒï¼Œå®ç°æ–¹æ³•å…¶å®æŒºç¬¨çš„ï¼Œä½†èƒœåœ¨èƒ½æ»¡è¶³æˆ‘ä¸ªäººéœ€æ±‚äº†ã€‚

å†æ¬¡ï¼Œæœ¬ç¯‡å†…å®¹é»˜è®¤è¿è¡Œåœ¨ä¸€èˆ¬çš„å¼€å‘ç¯å¢ƒå·²ç»æ­å»ºå®Œæˆçš„ç”µè„‘ä¸Šï¼Œç¯å¢ƒæ­å»ºå¯å‚è€ƒï¼š

https://laomai.org/archives/macos-env-setup-record-sharing/

## Hugo

ä¸€æ¬¾åŸºäºGoè¯­è¨€çš„é™æ€ç½‘ç«™ç”Ÿæˆå·¥å…·ï¼Œæˆ‘æ˜¯ä»20å¹´8æœˆä¸­æ—¬å¼€å§‹æ¥è§¦[Hugo](Hugo.md)çš„ï¼Œä¸€ç›´ä»¥æ¥éƒ½æœ‰åœ¨ä½¿ç”¨ï¼Œå“ªæ€•æ˜¯æœŸé—´æ¢æˆäº†Wordpressï¼Œæˆ‘ä¾ç„¶è§‰å¾—é™æ€çš„ä¸ªäººåšå®¢æ‰æ˜¯æˆ‘æ‰€éœ€è¦çš„ä¸”æ˜¯æˆ‘åšå®¢çš„æœ€ç»ˆå½¢æ€ã€‚æ‰€ä»¥åœ¨æˆ‘äº‘æœåŠ¡å™¨å°†è¦è¿‡æœŸçš„æ—¶å€™ï¼Œæˆ‘åˆä¸€æ¬¡å°†åšå®¢çš„ç¨‹åºæ¢å›äº†Hugoï¼Œå¹¶ä¸”ç›´æ¥æ‰˜ç®¡åœ¨Github Pagesä¸Šï¼Œè™½ç„¶å›½å†…è®¿é—®çš„é€Ÿåº¦ä¼šå¾ˆæ…¢ï¼Œä½†æ¶ä¸ä½å®ƒä¸ç”¨é’±å•Šï¼Œå…è´¹è¿˜æ˜¯å¾ˆé¦™çš„ã€‚

å®˜ç½‘åœ°å€ï¼š

https://gohugo.io

å®‰è£…extendedè¿™ä¸ªç‰ˆæœ¬ï¼Œåœ¨Githubä¸Šç›´æ¥ä¸‹è½½å¹¶è§£å‹ï¼Œå°†è§£å‹åçš„hugoç›®å½•ç§»åŠ¨åˆ°`/usr/local/`ç›®å½•ä¸‹ï¼Œç„¶åé…ç½®ä¸€ä¸‹å˜é‡å³å¯ã€‚

```zsh
# ç¼–è¾‘é…ç½®æ–‡ä»¶
vim ~/.zshrc

# åœ¨é€‚å½“çš„ä½ç½®æ·»åŠ 
export PATH="/usr/local/hugo:$PATH"

# ä¿å­˜é€€å‡ºåé‡æ–°åŠ è½½é…ç½®æ–‡ä»¶
source ~/.zshrc
```

Hugoçš„ç‰ˆæœ¬æ›´æ–°è¿­ä»£é€Ÿåº¦æŒºå¿«çš„ï¼Œå½“æ—¶ä¸ºäº†ä½¿ç”¨å¸¦æ‰©å±•çš„ç‰ˆæœ¬ï¼Œå°±ç”¨äº†ä¸Šé¢çš„æ–¹æ³•å»å®‰è£…ï¼Œåœ¨Hugoçš„é¢‘ç¹æ›´æ–°ä¸‹ï¼Œè¿™ç§å®‰è£…æ–¹æ³•æ›´æ–°èµ·æ¥è¿˜æ˜¯å¾ˆéº»çƒ¦çš„ã€‚å‰æ®µæ—¶é—´åœ¨å¤§å³°é‚£çœ‹åˆ°ä»–ç”¨Homebrewæ¥å®‰è£…ï¼Œæˆ‘å°±å»Homebrewçš„å®˜ç½‘é‚£é‡Œæœäº†ä¸‹æ–‡æ¡£ï¼Œè¿™æ—¶æ‰å‘ç°åŸæ¥Homebrewå®‰è£…çš„Hugoé»˜è®¤å°±æ˜¯å¸¦æ‰©å±•çš„ç‰ˆæœ¬ï¼Œç‰¹æ„åœ¨è™šæ‹Ÿæœºä¸ŠéªŒè¯äº†ä¸€ä¸‹ï¼Œçš„ç¡®æ˜¯å¸¦æ‰©å±•çš„ç‰ˆæœ¬ï¼Œ**å› æ­¤å»ºè®®ç›´æ¥ä½¿ç”¨Homebrewå®‰è£…Hugo**ã€‚

```zsh
laomai@debian:~$ brew install hugo
Running `brew update --auto-update`...
==> Fetching dependencies for hugo: linux-headers@5.15, glibc, gmp, isl, mpfr, libmpc, lz4, xz, zlib, zstd, binutils and gcc
==> Fetching linux-headers@5.15
==> Downloading https://mirrors.ustc.edu.cn/homebrew-bottles/linux-headers%405.15-5.15.92.x86_64_linux.bottle.tar.gz
Already downloaded: /home/laomai/.cache/Homebrew/downloads/51f6a08c797a657e5131eadef86eb085539a51dd111daf28744c8743cdd4251a--linux-headers@5.15-5.15.92.x86_64_linux.bottle.tar.gz
â€¦â€¦
ğŸº  /home/linuxbrew/.linuxbrew/Homebrew/Cellar/hugo/0.110.0: 48 files, 53.4MB
==> Running `brew cleanup hugo`...
Disable this behaviour by setting HOMEBREW_NO_INSTALL_CLEANUP.
Hide these hints with HOMEBREW_NO_ENV_HINTS (see `man brew`).
==> Caveats
==> hugo
Bash completion has been installed to:
  /home/linuxbrew/.linuxbrew/Homebrew/etc/bash_completion.d
laomai@debian:~$ hugo version
hugo v0.110.0+extended linux/amd64 BuildDate=unknown
```

https://github.com/Homebrew/homebrew-core/blob/master/Formula/hugo.rb#L22

## Obsidian

æˆ‘å…³æ³¨è¿™ä¸ªè½¯ä»¶æ˜¯åœ¨åšå®¢åœˆè®¨è®ºç¬”è®°è½¯ä»¶é‚£ä¼šï¼Œæˆ‘åœ¨å¯¹æ¯”è¯•ç”¨è¿‡[Obsidian](Obsidian.md)å’ŒLogseqåé€‰æ‹©äº†å‰è€…ï¼ŒLogseqä¹Ÿååˆ†çš„ä¼˜ç§€ï¼Œä½†æ˜¯åè€…æ›´é€‚åˆæˆ‘ã€‚å…¶å®æˆ‘ä¸ªäººæ˜¯æ›´å–œæ¬¢Typoraçš„ï¼Œä½†æ— å¥ˆå®ƒæ”¶è´¹äº†ã€‚å–œæ¬¢Typoraæ˜¯å› ä¸ºå®ƒç®€å•æ˜“ç”¨ï¼ŒObsidiançš„å¼ºå¤§æ˜¯è¦èŠ±æ—¶é—´å»å­¦ä¹ ã€æ‘¸ç´¢åæ‰èƒ½ä½¿ä¹‹å‘æŒ¥èµ·æ¥ï¼Œå¯¹äºæˆ‘æ¥è¯´ï¼Œè¿™ä¸å¤Ÿç›´æ¥ï¼Œæ‰£åˆ†ã€‚

Obsidianæ–°å»ºä»“åº“æ—¶å»ºè®®ç›´æ¥åœ¨iCloudä¸Šæ–°å»ºï¼Œè¿™æ ·å°±å¯ä»¥ç®€å•åœ°å®ç°è¿œç¨‹å¤‡ä»½ä¸åŒæ­¥çš„åŠŸèƒ½äº†ã€‚å¦‚æœä½ ä¹Ÿæ˜¯ç”¨Obsidianæ¥ç®¡ç†æ›´æ–°Hugoä¸Šçš„æ–‡ç« å†…å®¹ï¼Œé‚£ä¹ˆè£…ä»¥ä¸‹ä¸¤ä¸ªæ’ä»¶å¯ä»¥æ›´åŠ ä¾¿æ·çš„å¸®åŠ©æˆ‘ä»¬æ•´ç†å†…å®¹ã€‚

### Templater

ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œç”¨æ¥ç®¡ç†æ¨¡æ¿ã€‚åŠŸèƒ½å¾ˆå¼ºå¤§ï¼Œä½†æˆ‘åªç”¨äº†ä¸€ä¸ªåŠŸèƒ½ï¼Œå°±æ˜¯åœ¨ç‰¹å®šçš„æ–‡ä»¶å¤¹é‡Œæ–°å»ºæ–‡ä»¶æ—¶è‡ªåŠ¨å¥—ç”¨æŒ‡å®šçš„æ¨¡æ¿ã€‚

ä¸€ã€å…ˆåœ¨Obsidianä»“åº“æ ¹ç›®å½•æ–°å»ºä¸€ä¸ªç›®å½•ç”¨æ¥å­˜æ”¾æ¨¡æ¿æ–‡ä»¶â€”â€”`æ–‡ç« æ¨¡æ¿.md`ï¼›

![æˆªå±2023-02-11 10.47.46](https://sdn.qylao.com/laomai/2023/02/11/163e7058950176-1.webp)

æˆ‘ä½¿ç”¨äº†Templaterä¸Šçš„æ—¶é—´å‡½æ•°ï¼Œè¿™æ ·æ–°å»ºæ–‡æ¡£æ—¶å°±ä¼šåœ¨dateè¿™ä¸€æ è‡ªåŠ¨æ·»åŠ å½“å‰æ—¶é—´ã€‚åŒç†ï¼Œåœ¨titleè¿™ä¸€æ é‡Œå¯ä»¥ä½¿ç”¨`91. ã€Œæ¯›æ¯›ã€ç”Ÿæ—¥å¿«ä¹`è¿™ä¸ªå‡½æ•°å®ç°è‡ªåŠ¨å°†æ–‡æ¡£çš„æ–‡ä»¶åè¾“å…¥è¿›æ¥ã€‚æˆ‘çš„æ–‡ç« æ˜¯ä»¥æ–‡ä»¶å¤¹çš„å½¢å¼ä¿å­˜çš„ï¼ˆæ–‡ä»¶å¤¹åå­—å°±æ˜¯æ–‡ç« çš„titleï¼‰ï¼Œå› æ­¤titleè¿™ä¸€æ æˆ‘å¹¶ä¸é€‚ç”¨ï¼ŒæŠ˜ä¸­çš„åŠæ³•æ˜¯æ”¹ç”¨`post`è¿™ä¸ªå‡½æ•°ï¼Œä½†æ˜¯è¿™å¹¶ä¸å®Œç¾ï¼Œä¼šå°†postä¹Ÿè¾“å…¥è¿›æ¥ã€‚

äºŒã€å¼€å¯æ’ä»¶çš„æ–‡ä»¶å¤¹æ¨¡æ¿åŠŸèƒ½ï¼›

![æˆªå±2023-02-11 10.43.01](https://sdn.qylao.com/laomai/2023/02/11/163e700d465ade-1.webp)

### Image auto upload Plugin

ç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œé…åˆPicGoæ¥é£Ÿç”¨ã€‚ä»¥å‰æˆ‘æ˜¯å°†æ–‡æ¡£é‡Œçš„å›¾ç‰‡å­˜æ”¾åœ¨æ–‡æ¡£æ‰€åœ¨ç›®å½•é‡Œçš„ï¼Œè¿™æ ·å­çš„ç¡®å¾ˆå¥½æ•´ç†ä¸è¿ç§»ã€‚ä½†ä¸€æ—¦æ—¶é—´ä¹…äº†ï¼Œå›¾ç‰‡å¤šäº†ï¼Œæ•´ä¸ªpostæ–‡ä»¶å¤¹å°±ä¼šå˜å¾—ååˆ†è‡ƒè‚¿ï¼Œå†ä¸‰æ€è€ƒï¼Œå†³å®šè¿˜æ˜¯ç”¨å›å›¾åºŠçš„æ¨¡å¼ã€‚

Obsidianä¸Šå¼ºå¤§çš„æ’ä»¶è¿˜æœ‰å¾ˆå¤šï¼Œä½†æ˜¯ä¸æ­¤å†…å®¹ä¸ç¬¦ï¼Œå› æ­¤å°±ä¸å†æ·±å…¥æ¢ç©¶äº†ã€‚

## è‡ªåŠ¨åŒ–æ„å»º

![è‡ªåŠ¨åŒ–æµç¨‹](https://sdn.qylao.com/laomai/2023/02/11/163e729bb5b3ba-1.webp)

ä¸Šå›¾æ˜¯æˆ‘æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µåšçš„ä¸€ä¸ªè¿‡ç¨‹å›¾ï¼Œæ‰€è°“çš„â€œè‡ªåŠ¨åŒ–â€å…¶å®å°±æ˜¯åˆ©ç”¨Crontabä¸Gitæ¥å®ç°æ¯éš”ä¸€æ®µæ—¶é—´å°±è‡ªåŠ¨è¿›è¡Œæäº¤å†…å®¹åˆ°Githubä¸Šã€‚å…¶ä¸­æˆ‘å…ˆå°†æ–‡ç« å†…å®¹ä¸ä»£ç éƒ½å…ˆæäº¤åˆ°Giteeååˆé‡æ–°æ‹‰å–æ–‡æ¡£æ–‡ä»¶å›Nasé‡Œæ˜¯å› ä¸ºæ–¹ä¾¿åŒºåˆ†ä¸å¤šé‡å¤‡ä»½ï¼Œå¯æ ¹æ®è‡ªå·±çš„å®é™…æƒ…å†µå°†è¿™äº›æ­¥éª¤å»æ‰ï¼Œç›´æ¥ä»iCloudé‡Œå¤åˆ¶æ–‡æ¡£å†…å®¹åˆ°Tempé‡Œè¿›è¡Œæ„å»ºã€‚

æˆ‘çš„è‡ªåŠ¨åŒ–æ„å»ºè¿‡ç¨‹å¤§æ¦‚å°±æ˜¯ï¼š

ä¸€ã€åœ¨`$HOME`ç›®å½•ä¸‹åˆ›å»º`.crontab-sh`ç›®å½•ï¼ŒåŒæ—¶åœ¨ç›®å½•é‡Œæ–°å»ºä¸€ä¸ªè„šæœ¬æ–‡ä»¶ï¼›

```zsh
# åœ¨$HOMEç›®å½•ä¸‹åˆ›å»ºéšè—æ–‡ä»¶å¤¹.crontab-sh
mkdir ~/.crontab-sh
# åˆ›å»ºè„šæœ¬æ–‡ä»¶
touch ~/.crontab-sh/autoPush.sh
```

äºŒã€å®‰è£…å¥½Obsidianååˆ›å»ºä»“åº“æ—¶æ–‡æ¡£ä¿å­˜çš„è·¯å¾„é€‰æ‹©ä¿å­˜åœ¨iCloudé‡Œï¼ŒWindowsç›´æ¥ä¿å­˜åœ¨æœ¬åœ°å³å¯ï¼›

ä¸‰ã€å°†Hugoä¸Šä¿å­˜æ–‡ç« çš„æ–‡ä»¶å¤¹å¤åˆ¶åˆ°ä¸Šé¢æ–°å»ºçš„ä»“åº“é‡Œï¼Œæ¯”å¦‚æˆ‘çš„æ˜¯postå’Œdiaryè¿™ä¸¤ä¸ªæ–‡ä»¶å¤¹ï¼›

å››ã€åœ¨Obsidianä»“åº“é‡Œåˆ›å»ºGitå¹¶æ·»åŠ è¿œç¨‹ä»“åº“Giteeï¼›

Obsidianä»“åº“è¯¦ç»†è·¯å¾„å¯ä»¥åœ¨èœå•æ  File â˜ Open Vaultâ€¦ ä¸ŠæŸ¥çœ‹ï¼Œå€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå› ä¸ºiCloudç›®å½•é»˜è®¤ä¿å­˜åœ¨`/Users/laomai/Library/Mobile Documents/`ç›®å½•ä¸‹ï¼ŒMobileåé¢æœ‰ä¸ªç©ºæ ¼ï¼Œæ‰€ä»¥ä½¿ç”¨cdå‘½ä»¤æ—¶éœ€åœ¨ç©ºæ ¼å‰åŠ ä¸€ä¸ªåæ–œæ `\`ã€‚

```zsh
# è¿›å…¥Obsidianä»“åº“ç›®å½•
cd /Users/laomai/Library/Mobile\ Documents/com~apple~CloudDocs/laomai.org
# åˆ›å»ºGit
git init
# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add gitee git@gitee.com:laomai/laomai.org.git
```

äº”ã€ç¼–è¾‘æ­¥éª¤ä¸€åˆ›å»ºçš„è„šæœ¬æ–‡ä»¶ï¼›

```zsh
# ç¼–è¾‘è„šæœ¬æ–‡ä»¶
vim ~/.crontab-sh/autoPush.sh
```

å°†ä»¥ä¸‹å†…å®¹å¤åˆ¶åˆ°è„šæœ¬æ–‡ä»¶é‡Œï¼š

```zsh
#!/bin/bash

echo -e "\033[0;32mDeploying updates to laomai...\033[0m"
msg="Push at `TZ=UTC-8 date +%Y-%m-%d" "%H:%M:%S`"
if [ $# -eq 1 ]
then msg="$1"
fi

# è¯¥ç›®å½•ä¸ºObsidianä»“åº“ç›®å½•
cd /Users/laomai/Library/Mobile\ Documents/com~apple~CloudDocs/laomai.org
git add .
git commit -m "$msg"
git push -u gitee main
```

å…­ã€ä»Giteeé‡Œæ‹‰å–Obsidiançš„æ–‡æ¡£æ–‡ä»¶å¤‡ä»½åˆ°Nasä¸Šï¼›

å› ä¸ºæˆ‘æ‹…å¿ƒåœ¨ç»ˆç«¯ä¸Š[æŠ˜è…¾](æŠ˜è…¾.md)ç¾¤æ™–ç³»ç»Ÿä¼šå½±å“åˆ°å®ƒçš„ç¨³å®šæ€§ï¼Œæ‰€ä»¥æˆ‘åœ¨[ç¾¤æ™–](ç¾¤æ™–.md)ä¸Šè·‘äº†ä¸ªè™šæ‹Ÿæœºä¸“é—¨ç”¨æ¥æŠ˜è…¾ï¼Œè¿™æ—¶å°±ä¼šæ¶‰åŠåˆ°æ–‡ä»¶å…±äº«ã€‚å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘å®¶é‡Œä¸€ç›´æœ‰ä¸¤ä¸ªè™šæ‹Ÿæœºé•¿æœŸè¿è¡Œç€çš„ï¼Œä¸€ä¸ªè·‘åœ¨Nasä¸Šï¼Œä¸€ä¸ªè·‘åœ¨è½¯è·¯ç”±ä¸Šï¼Œè·‘åœ¨è½¯è·¯ç”±ä¸Šçš„è™šæ‹Ÿæœºæˆ‘å¹³æ—¶å¾ˆå°‘åŠ¨ï¼Œå®ƒä¸»è¦è´Ÿè´£è·‘ä¸€äº›çº¿ä¸Šçš„å°ç¨‹åºï¼Œåªæ±‚ç¨³å®šã€‚è·‘åœ¨Nasä¸Šçš„è™šæ‹Ÿæœºåˆ™æ˜¯ç”¨æ¥æµ‹è¯•çš„ï¼Œç¬¦åˆæˆ‘è¦æ±‚çš„çº¿ä¸Šç¨‹åºæˆ‘å°±ä¼šæ¬åˆ°è½¯è·¯ç”±ä¸Šçš„è™šæ‹Ÿæœºä¸Šè·‘ã€‚æŒ‰ç†è¯´Nasä¸Šçš„è™šæ‹Ÿæœºå®Œå…¨å¯ä»¥è·‘åœ¨ç”µè„‘ä¸Šçš„ï¼Œä½†æ˜¯å› ä¸ºæ¶æ„çš„åŸå› ï¼Œæ— å¥ˆä¹‹ä¸‹åœ¨Nasä¸Šä¹Ÿè·‘äº†ä¸ªè™šæ‹Ÿæœºã€‚åŠ ä¸Šç”µè„‘ä¸Šæœ‰æ—¶ä¹Ÿä¼šè·‘ä¸¤ä¸ªARMæ¶æ„çš„è™šæ‹Ÿæœºï¼Œæ‰€ä»¥è¿™ä¹ˆå¤šè™šæ‹Ÿæœºä¹‹é—´çš„æ–‡ä»¶å…±äº«å°±æˆäº†é—®é¢˜ã€‚æˆ‘ç°åœ¨ä½¿ç”¨çš„æ–¹æ¡ˆæ˜¯ï¼Œèµ„æ–™é›†ä¸­å­˜å‚¨åˆ°ç¾¤æ™–ä¸Šï¼Œç„¶åè™šæ‹Ÿæœºä¸Šå®‰è£…NFSè¿›è¡Œè°ƒç”¨ã€‚è‡³äºMacOSç›´æ¥ä½¿ç”¨AFPæœåŠ¡ï¼Œä½“éªŒæ›´ä½³ã€‚

ç¾¤æ™–ä¸Šå¼€å¯ç›¸åº”çš„æœåŠ¡ï¼šæ§åˆ¶é¢æ¿â˜æ–‡ä»¶æœåŠ¡â˜AFP/NFSâ˜å‹¾é€‰å¯ç”¨ï¼›

NFSå®¢æˆ·ç«¯å®‰è£…ï¼š

ä»¥Debian11ä¸ºä¾‹ï¼Œrootç”¨æˆ·ã€‚

```zsh
# å®‰è£…nfs-common ç³»ç»Ÿä¸€èˆ¬è‡ªå¸¦
apt install nfs-common
# æµ‹è¯•æŒ‚è½½è¿œç¨‹ç›®å½•åˆ°/home/nas
# IPä¸ºç¾¤æ™–çš„å†…ç½‘IP
# volume1ä¸ºç¾¤æ™–çš„å­˜å‚¨æ±  å­˜å‚¨æ± å¯ä»¥æ˜¯å¤šä¸ª volume2ï¼Œvolume3ï¼Œâ€¦â€¦
# laomaiä¸ºå­˜å‚¨æ± 1ä¸Šçš„å…±äº«æ–‡ä»¶å¤¹
mount -t nfs 192.168.1.100:/volume1/laomai /home/nas
#æŸ¥çœ‹
df
# å–æ¶ˆæŒ‚è½½
umount -l /home/nas
# å®‰è£…autofs
apt install autofs
# é…ç½®autofsä¸»ä½“æ–‡ä»¶
vim /etc/auto.master
#/misc	/etc/auto.misc
/home/nas  /etc/auto.nas
# é…ç½®auto.nas
vim /etc/auto.nas
# è¿™é‡Œæœ‰ç‚¹éš¾æ‡‚ï¼Œæˆ‘çš„ç†è§£æ˜¯å½“æˆ‘ä»¬åœ¨/home/nasè¿™ä¸ªç›®å½•æ—¶ï¼Œåªè¦æˆ‘ä»¬cd laomai
# è¿›å…¥/home/nas/laomaiè¿™ä¸ªç›®å½•æ—¶å°±ä¼šè§¦å‘autofsï¼Œä»è€Œè‡ªåŠ¨æŒ‚è½½åˆ°è¿œç¨‹ç›®å½•ä¸Š
laomai	-rw	192.168.1.100:/volume1/laomai
# é‡å¯autofsæœåŠ¡
systemctl restart autofs.service
```

ä¸ºäº†å¯ä»¥å¿«é€Ÿè¿›å…¥è¿™ä¸ªæŒ‚è½½çš„è¿œç¨‹ç›®å½•ï¼Œå¯ä»¥æ·»åŠ ä¸€æ¡aliasï¼Œè¿™æ ·å­åœ¨ç»ˆç«¯é‡Œä¸€æ•²naså°±ä¼šè‡ªåŠ¨è¿›å…¥è¿œç¨‹ç›®å½•äº†ã€‚åœ¨é…ç½®æ–‡ä»¶é€‚å½“çš„ä½ç½®æ·»åŠ ä»¥ä¸‹å‘½ä»¤ï¼š

```zsh
alias nas='cd /home/nas/laomai/'
```

å“ˆå“ˆå“ˆï¼Œå¥½åƒæ‰¯å¾ˆè¿œäº†ï¼Œå›åˆ°å°†Pushåˆ°Giteeé‡Œæ–‡æ¡£æ–‡ä»¶å¤‡ä»½åˆ°Nasä¸Šè¿™ä¸ªé—®é¢˜é‡Œï¼Œæ—¢ç„¶æœ‰è™šæ‹Ÿæœº24å°æ—¶åœ¨è·‘ï¼Œé‚£ä¹ˆä»¥ä¸‹æ‰€æœ‰è‡ªåŠ¨åŒ–éƒ½ä¼šè·‘åœ¨ä¸Šé¢é‚£ä¸ªDebian11çš„è™šæ‹Ÿæœºä¸Šã€‚

```zsh
# è¿›å…¥æŒ‚è½½å¥½çš„è¿œç¨‹ç›®å½•
cd /home/nas/laomai
# åˆ›å»ºå¹¶è¿›å…¥obsidianç›®å½•
mkdir obsidian && cd obsidian
# åˆ›å»ºGit
git init
# æ·»åŠ è¿œç¨‹ä»“åº“
git remote add gitee git@gitee.com:laomai/laomai.org.git
# æ‹‰å–
git pull gitee main
```

ä¸ƒã€åˆ›å»ºTempç›®å½•å¹¶åˆ›å»ºç›¸å¯¹åº”çš„Crontabè„šæœ¬ï¼›

è¿™ä¸ªç›®å½•çš„ä½œç”¨æ˜¯ç»„åˆHugoç¨‹åºä¸æ–‡ç« ï¼Œç„¶åæ¨é€åˆ°Githubï¼Œå†è®©Github Actionså®ŒæˆçœŸæ­£çš„è‡ªåŠ¨åŒ–æ„å»ºã€‚ä¸Šé¢çš„æµç¨‹å›¾å¯ä»¥çœ‹åˆ°ï¼Œæˆ‘åœ¨ä¸ªæ€§é…ç½®æˆ–è€…ä¿®æ”¹ä¸»é¢˜æ—¶ï¼Œä¹Ÿæ˜¯ç”¨Gitå»ç®¡ç†ä»£ç ã€‚å¹³æ—¶å¼€å‘å°±ç”¨Devåˆ†æ”¯ï¼Œå®Œæˆä¸€ä¸ªåŠŸèƒ½æˆ–è€…ç‰ˆæœ¬æ—¶å°±åˆå¹¶åˆ°Mainè¿™ä¸ªä¸»åˆ†æ”¯ä¸Šï¼ŒTempæ‹‰å–Hugoç¨‹åºæ—¶åªä¼šæ‹‰å–Mainè¿™ä¸ªä¸»åˆ†æ”¯ï¼Œä¸¤ä¸ªåˆ†æ”¯å¾ˆå¥½çš„é¿å…äº†å¼€å‘åˆ°ä¸€åŠæ—¶å°±è¢«Crontabè„šæœ¬è‡ªåŠ¨æ‹‰å–å¹¶æ¨é€åˆ°çº¿ä¸Šã€‚

```zsh
# è¿›å…¥æŒ‚è½½å¥½çš„è¿œç¨‹ç›®å½•
cd /home/nas/laomai
# åˆ›å»ºå¹¶è¿›å…¥Tempç›®å½•
mkdir Temp && cd Temp
# åˆ›å»ºGit
git init
# æ·»åŠ è¿œç¨‹ä»“åº“
# è¿™é‡Œæ·»åŠ ä¸¤ä¸ªè¿œç¨‹ä»“åº“ ä»Giteeä¸Šæ‹‰å– æ¨é€åˆ°Github
# Giteeè¿™ä¸ªä»“åº“ä¸ä¸Šé¢çš„ä»“åº“ä¸æ˜¯åŒä¸€ä¸ª è¿™ä¸ªæ˜¯ç”¨æ¥æ‰˜ç®¡æˆ‘å¯¹Hugoçš„ä¸ªæ€§é…ç½®å’Œä¸»é¢˜çš„
git remote add gitee git@gitee.com:laomai/newHugo.git
git remote add github git@github.com:laomai/newHugo.git
```

æ¥ä¸‹æ¥ç¼–è¾‘è™šæ‹Ÿæœºä¸Šçš„è„šæœ¬ï¼ŒåŒæ ·åœ¨`$HOME`ç›®å½•åˆ›å»ºä¸€ä¸ª`.crontab-sh`çš„éšè—ç›®å½•ã€‚

```zsh
# åœ¨$HOMEç›®å½•ä¸‹åˆ›å»ºéšè—æ–‡ä»¶å¤¹.crontab-sh
mkdir ~/.crontab-sh
# åˆ†åˆ«åˆ›å»ºå¹¶ç¼–è¾‘è„šæœ¬æ–‡ä»¶
# è„šæœ¬å†…å®¹ä¸ºä¸‹æ–¹å¯¹åº”çš„ä»£ç å—
vim ~/.crontab-sh/autoPull.sh
vim ~/.crontab-sh/buildHugo.sh
```

`autoPull.sh`ç”¨ä½œè‡ªåŠ¨æ‹‰å–æ–‡ç« å†…å®¹ï¼š

```bash
#!/bin/bash

cd /home/nas/laomai/obsidian
git pull gitee main
```

`buildHugo.sh`ç”¨ä½œè‡ªåŠ¨æ¨é€åˆ°Githubä¸Šè‡ªåŠ¨åŒ–æ„å»ºï¼š

```bash
#!/bin/bash

echo -e "\033[0;32mDeploying updates to laomai...\033[0m"
msg="rebuilding site `TZ=UTC-8 date +%Y-%m-%d" "%H:%M:%S`"
if [ $# -eq 1 ]
then msg="$1"
fi

cd /home/nas/laomai/Temp
# æ‹‰å–Giteeä¸Šçš„Mainåˆ†æ”¯
git pull gitee main --rebase

# å°†Obsidianä¸Šçš„æ–‡ç« å†…å®¹å¤åˆ¶è¿‡æ¥
/bin/cp -rf /home/nas/laomai/obsidian/è€éº¦ç¬”è®°/diary /home/nas/laomai/Temp/content
/bin/cp -rf /home/nas/laomai/obsidian/è€éº¦ç¬”è®°/post /home/nas/laomai/Temp/content

# æ¨é€åˆ°Github
git add .
git commit -m "$msg"
git push -u --force github main
```

å…³äºå°†æ–‡ç« å†…å®¹å¤åˆ¶ï¼Œä¸ºä»€ä¹ˆ`cp`è¿™ä¸ªå‘½ä»¤è¦åœ¨å‰é¢åŠ ä¸Š`/bin`ï¼Ÿå…¶å®åœ¨ç»ˆç«¯ä¸Šè¾“å…¥`alias`å°±ä¼šæ˜ç™½äº†ã€‚

```zsh
root@debian:~# alias
alias cp='cp -i'
alias l='ls $LS_OPTIONS -lA'
alias ll='ls $LS_OPTIONS -l'
alias ls='ls $LS_OPTIONS'
alias mv='mv -i'
alias nas='cd /home/nas/laomai/'
alias rm='rm -i'
```

`cp`è¿™ä¸ªå‘½ä»¤é»˜è®¤å°±ç»‘å®šäº†è¦†ç›–å‰è¯¢é—®çš„å‚æ•°ï¼Œæ‰€ä»¥ç›´æ¥ä½¿ç”¨`/bin/cp`å°†è¦†ç›–å‰è¯¢é—®è¿™ä¸€æ­¥å»æ‰ã€‚

å…«ã€åˆ›å»ºCrontabå®šæ—¶ä»»åŠ¡ï¼›

ç›®å‰ä¸ºæ­¢æˆ‘ä¸€å…±åˆ›å»ºä¸‰ä¸ªè„šæœ¬ï¼Œä¸€ä¸ªæ˜¯åœ¨[Mac](Mac.md)ä¸Šè¿è¡Œçš„ï¼Œä¸¤ä¸ªæ˜¯åœ¨è™šæ‹Ÿæœºä¸Šè¿è¡Œçš„ã€‚

Macï¼š

```zsh
# ç¼–è¾‘è®¡æ—¶å™¨
crontab -e

# æ¯éš”ååˆ†é’Ÿè¿è¡Œä¸€æ¬¡è„šæœ¬
*/10 * * * * /etc/profile;/bin/sh /Users/laomai/.crontab-sh/autoPush.sh > /dev/null 2>&1
```

è™šæ‹Ÿæœºï¼š

```zsh
# ç¼–è¾‘è®¡æ—¶å™¨
crontab -e

# æ¯éš”äº”åˆ†é’Ÿè¿è¡Œä¸€æ¬¡è„šæœ¬
*/5 * * * * /etc/profile;/bin/sh /root/.crontab-sh/autoPull.sh > /dev/null 2>&1

# æ¯éš”ä¸¤å°æ—¶è¿è¡Œä¸€æ¬¡è„šæœ¬
0 */2 * * * /etc/profile;/bin/sh /root/.crontab-sh/buildHugo.sh > /dev/null 2>&1
```

ä¹ã€GitHub Actions

åœ¨å­˜æ”¾Hugoç¨‹åºçš„GitHubä»“åº“ä¸Šå¼€æ”¾Workflowçš„æƒé™ï¼Œä¸æ˜¯Githubè®¾ç½®ï¼Œæ˜¯ä»“åº“çš„è®¾ç½®ã€‚

è¿›å…¥ä»“åº“â˜Settingsâ˜Actionsâ˜Generalâ˜Workflow permissionsâ˜é€‰æ‹© Read and write permissions ä¸å‹¾é€‰ Allow Github Actions to create and approve pull requests

åœ¨Hugoç¨‹åºæ ¹ç›®å½•ä¸Šæ–°å»º`.github/workflows/main.yml`æ–‡ä»¶ï¼Œè·¯å¾„è¦ç¬¦åˆGithub Actionsçš„è§„åˆ™ã€‚

æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼š

```yaml
# This is a basic workflow to help you get started with Actions

name: build laomai.org

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: ["main"]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
      - uses: actions/checkout@v3
      - name: Hugo setup
        # You may pin to the exact commit or the version.
        # uses: peaceiris/actions-hugo@2e89aa66d0093e4cd14751b3028fc1a179452c2e
        uses: peaceiris/actions-hugo@v2.4.13
        with:
          # The Hugo version to download (if necessary) and use. Example: 0.58.2
          hugo-version: 0.110.0
          # Download (if necessary) and use Hugo extended version. Example: true
          extended: true
      - name: Build Hugo
        run: hugo --minify

      - name: Deploy
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./public
```

åã€å»æ‰MacOSå’Œç¾¤æ™–ç³»ç»Ÿä¸Šå¤šå‡ºæ¥çš„æ–‡ä»¶ä¸ç›®å½•ï¼›

åœ¨Hugoç¨‹åºæ ¹ç›®å½•ä¸Šæ·»åŠ Gitçš„å¿½ç•¥è§„åˆ™ï¼Œæ–°å»º`.gitignore`æ–‡ä»¶ï¼š

```bash
public
node_modules
.vscode
.prettierrc
@eaDir
.DS_Store
```

